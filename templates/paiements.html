<!-- paiement.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Gestion des Paiements</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/paiement.css') }}">

</head>
<body>
    <div class="page-header">
        <h2>üí∞ Gestion des Paiements</h2>
        <button class="btn btn-success" onclick="showModal('addPaiementModal')">+ Nouveau Paiement</button>
    </div>

    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Facture</th>
                    <th>Client</th>
                    <th>Montant</th>
                    <th>Situation</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="paiementsTable"></tbody>
        </table>
    </div>

    <div id="addPaiementModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addPaiementModal')">&times;</span>
            <h3>Enregistrer un paiement</h3>
            <form id="paiementForm" onsubmit="enregistrerPaiement(event)">
                <div class="form-group">
                    <label for="factureSelect">Facture *</label>
                    <select id="factureSelect" required onchange="afficherDetailsFacture()">
                        <option value="">S√©lectionner une facture</option>
                    </select>
                </div>
                <div id="detailsFacture" style="display:none;">
                    <p><strong>Abonn√©:</strong> <span id="factureAbonne"></span></p>
                    <p><strong>Montant total:</strong> <span id="factureMontant"></span> FCFA</p>
                    <p><strong>D√©j√† pay√©:</strong> <span id="facturePaye"></span> FCFA</p>
                    <p><strong>Reste √† payer:</strong> <span id="factureReste"></span> FCFA</p>
                </div>
                <div class="form-group">
                    <label for="montantPaiement">Montant du paiement *</label>
                    <input type="number" id="montantPaiement" step="0.01" required min="0">
                </div>
                <div class="form-group">
                    <label for="modePaiement">Mode de paiement *</label>
                <select id="modePaiement" required>
                    <option value="">S√©lectionner un mode</option>
                    <option value="especes" selected>Esp√®ces</option>
                    <option value="mobile_money">Mobile Money</option>
                    <option value="cheque">Ch√®que</option>
                    <option value="carte">Carte bancaire</option>
                    <option value="virement">Virement</option>
                </select>
                </div>
                <div class="form-group">
                    <label for="referencePaiement">R√©f√©rence</label>
                    <input type="text" id="referencePaiement">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addPaiementModal')">Annuler</button>
                    <button type="submit" class="btn btn-success">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <script src="static/js/paiement.js"></script>
</body>
</html>
